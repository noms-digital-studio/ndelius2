@import data._
@import helper._
@import paroleParom1Report.hiddenInputs._
@import play.Environment
@import com.typesafe.config.Config
@import data.viewModel.PageStatus
@import org.webjars.play.WebJarsUtil
@import fragment.popup

@(reportForm: Form[ParoleParom1ReportData], encrypter: String => String)(implicit pageStatuses: Map[Int, PageStatus], webJarsUtil: WebJarsUtil, environment: Environment, configuration: Config)

@implicitField = @{ FieldConstructor(govukElements.f) }

@popup(reportForm, encrypter, "Prisoner details", 2) {

    @inputText(reportForm("prisonerDetailsPrisonInstitution"), '_label -> "Prison or Young Offender Institution", 'required -> "true")

    @inputText(reportForm("prisonerDetailsPrisonersFullName"), '_label -> "Prisoner`s full name", 'required -> "true")

    @inputText(reportForm("prisonerDetailsPrisonNumber"), '_label -> "Prison number", 'required -> "true")

    @inputText(reportForm("prisonerDetailsNomisNumber"), '_label -> "NOMIS number", 'required -> "true")

    <div class="govuk-form-group" data-module="radios" >
        <fieldset class="govuk-fieldset govuk-!-margin-bottom-1">
            <legend class="govuk-fieldset__legend govuk-label">
                Current prison category
            </legend>

            @if("male".equalsIgnoreCase(reportForm("gender").value)) {
                @inputRadioGroup(
                    reportForm("prisonerDetailsPrisonersCategory"),
                    options(
                        "a" -> "A",
                        "b" -> "B",
                        "c" -> "C",
                        "d" -> "D"
                    ),
                )
            } else {
                @inputRadioGroup(
                    reportForm("prisonerDetailsPrisonersCategory"),
                    options(
                        "a" -> "A",
                        "restricted" -> "Restricted",
                        "closed" -> "Closed",
                        "open" -> "Open"
                    ),
                )
            }

        </fieldset>

    </div>

    @textarea(reportForm("prisonerDetailsOffence"), '_label -> "Offence", 'class -> "wide", 'required -> "true")

    @textarea(reportForm("prisonerDetailsSentence"), '_label -> "Sentence", 'class -> "wide", 'required -> "true")

    <div class="govuk-form-group" data-module="radios">
        <fieldset class="govuk-fieldset govuk-!-margin-bottom-1">
            <legend class="govuk-fieldset__legend govuk-label">
                Sentence type
            </legend>

            @inputRadioGroup(
                reportForm("prisonerDetailsSentenceType"),
                options(
                    "indeterminate" -> "Indeterminate",
                    "determinate" -> "Determinate"
                ),
                Symbol("_inline") -> "true",
                Symbol("data-aria-controls") -> "sentence-type"
            )
        </fieldset>

        <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="sentence-type-indeterminate">

            @inputText(reportForm("prisonerDetailsTariffLength"), '_label -> "Tariff length", 'required -> "true")

            @inputText(
                reportForm("prisonerDetailsTariffExpiryDate"),
                '_label -> "Tariff expiry date",
                'required -> "true",
                '_date -> "true",
                '_form_hint -> "For example, 31 3 2018",
                '_day -> reportForm("prisonerDetailsTariffExpiryDate_day").getValue.orElse(""),
                '_month -> reportForm("prisonerDetailsTariffExpiryDate_month").getValue.orElse(""),
                '_year -> reportForm("prisonerDetailsTariffExpiryDate_year").getValue.orElse(""))

        </div>

        <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="sentence-type-determinate">

            @inputText(
                reportForm("prisonerDetailsParoleEligibilityDate"),
                '_label -> "Parole eligibility date",
                'required -> "true",
                '_date -> "true",
                '_form_hint -> "For example, 31 3 2018",
                '_day -> reportForm("prisonerDetailsParoleEligibilityDate_day").getValue.orElse(""),
                '_month -> reportForm("prisonerDetailsParoleEligibilityDate_month").getValue.orElse(""),
                '_year -> reportForm("prisonerDetailsParoleEligibilityDate_year").getValue.orElse(""))

            @inputText(
                reportForm("prisonerDetailsAutoReleaseDate"),
                '_label -> "Automatic release date/non parole eligibility date",
                'required -> "true",
                '_date -> "true",
                '_form_hint -> "For example, 31 3 2018",
                '_day -> reportForm("prisonerDetailsAutoReleaseDate_day").getValue.orElse(""),
                '_month -> reportForm("prisonerDetailsAutoReleaseDate_month").getValue.orElse(""),
                '_year -> reportForm("prisonerDetailsAutoReleaseDate_year").getValue.orElse(""))

        </div>

    </div>


}
